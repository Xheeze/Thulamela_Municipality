import{r as o,j as e,I as i}from"./index-zf_QIKpT.js";import{s as h}from"./storage-CH_An79i.js";function N(){const[l,n]=o.useState([]),[u,p]=o.useState([]),[g,f]=o.useState("general"),[d,x]=o.useState(!1),c=o.useRef(null);o.useEffect(()=>{m()},[]);function m(){p(h.getDocuments())}function j(t){const s=Array.from(t);n(s)}async function v(){if(l.length!==0){x(!0);for(const t of l){let s=null;t.size<1024*1024&&(s=await b(t));const r=h.saveDocument({name:t.name,size:t.size,type:t.type,dataUrl:s,meta:{category:g}});p(a=>[r,...a])}n([]),x(!1),c.current&&(c.current.value=null),m()}}function b(t){return new Promise((s,r)=>{const a=new FileReader;a.onload=()=>s(a.result),a.onerror=r,a.readAsDataURL(t)})}function D(t){const s={submitted:{bg:"#DBEAFE",color:"#1E40AF",text:"Submitted"},processing:{bg:"#FEF3C7",color:"#92400E",text:"Processing"},processed:{bg:"#D1FAE5",color:"#065F46",text:"Processed"},rejected:{bg:"#FEE2E2",color:"#991B1B",text:"Rejected"}},r=s[t]||s.submitted;return e.jsx("span",{style:{background:r.bg,color:r.color,padding:"0.25rem 0.75rem",borderRadius:"999px",fontSize:"0.75rem",fontWeight:"600"},children:r.text})}const y=[{value:"general",label:"General Document"},{value:"id",label:"ID Document"},{value:"proof-address",label:"Proof of Address"},{value:"application",label:"Application Form"},{value:"rates",label:"Rates & Taxes"},{value:"permit",label:"Permit/License"}];return e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:"Document Services"}),e.jsxs("section",{className:"upload-section card",children:[e.jsx("h2",{style:{marginBottom:"1rem"},children:"Upload Documents"}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Document Category"}),e.jsx("select",{value:g,onChange:t=>f(t.target.value),style:{width:"100%",maxWidth:"400px",padding:"0.5rem",borderRadius:"6px",border:"1px solid var(--muted)"},children:y.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{className:"upload-area",style:{border:"2px dashed var(--muted)",borderRadius:"8px",padding:"2rem",textAlign:"center",cursor:"pointer",transition:"all 0.2s"},children:[e.jsx(i,{name:"Upload",className:"icon-large",style:{marginBottom:"1rem",opacity:.5}}),e.jsx("h3",{style:{marginBottom:"0.5rem"},children:"Drop files here or click to browse"}),e.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1rem"},children:"Supported formats: PDF, JPG, PNG, DOC (Max 5MB per file)"}),e.jsx("input",{ref:c,type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:t=>j(t.target.files),style:{opacity:0,position:"absolute",width:"100%",height:"100%",top:0,left:0,cursor:"pointer"}})]}),l.length>0&&e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsxs("h3",{style:{marginBottom:"1rem"},children:["Selected Files (",l.length,")"]}),e.jsx("div",{className:"preview-list",style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:l.map((t,s)=>e.jsxs("div",{className:"preview-item",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:"var(--light)",borderRadius:"6px"},children:[e.jsx(i,{name:"Document"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"600"},children:t.name}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[(t.size/1024).toFixed(2)," KB"]})]}),e.jsx("button",{onClick:()=>n(l.filter((r,a)=>a!==s)),style:{background:"transparent",color:"var(--muted)",border:"none",cursor:"pointer",padding:"0.25rem"},children:"✕"})]},s))}),e.jsx("button",{className:"view-all",onClick:v,disabled:d,style:{width:"100%",marginTop:"1rem",opacity:d?.6:1},children:d?"Uploading...":`Submit ${l.length} file(s)`})]})]}),e.jsxs("section",{className:"history-section card",style:{marginTop:"2rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h2",{children:"Submission History"}),e.jsxs("button",{className:"action-btn secondary",onClick:m,style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:[e.jsx(i,{name:"Dashboard",size:16}),"Refresh"]})]}),e.jsx("div",{className:"history-list",children:u.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",color:"var(--text-secondary)"},children:[e.jsx(i,{name:"Document",size:48,style:{opacity:.3,marginBottom:"1rem"}}),e.jsx("p",{children:"No documents submitted yet."})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:u.map(t=>{var s,r;return e.jsxs("div",{className:"history-item",style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"var(--light)",borderRadius:"8px"},children:[e.jsx(i,{name:"Document",style:{flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{className:"history-title",style:{fontWeight:"600",marginBottom:"0.25rem"},children:t.name}),e.jsxs("div",{className:"history-meta",style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[new Date(t.createdAt).toLocaleString()," • ",Math.round(t.size/1024)," KB",((s=t.meta)==null?void 0:s.category)&&` • ${((r=y.find(a=>a.value===t.meta.category))==null?void 0:r.label)||t.meta.category}`]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[D(t.status),t.dataUrl&&e.jsx("button",{className:"view-all",onClick:()=>window.open(t.dataUrl||"#"),style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:"View"})]})]},t.id)})})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem",marginTop:"2rem"},children:[e.jsxs("section",{className:"card",children:[e.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Requirements"}),e.jsx("p",{style:{color:"var(--text-secondary)"},children:"Ensure you have your original ID document, proof of residence, and any other supporting documents specific to your request."})]}),e.jsxs("section",{className:"card",children:[e.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Processing Times"}),e.jsx("p",{style:{color:"var(--text-secondary)"},children:"Standard requests take 5-7 business days. Expedited services may be available for an additional fee."})]})]})]})}export{N as default};
